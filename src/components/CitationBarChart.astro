---
import { onMount } from 'astro/client';
import citations from '../content/data/citations.json';

let chart;

onMount(async () => {
  const Chart = (await import('chart.js/auto')).default;
  const ctx = document.getElementById('citationChart').getContext('2d');
  chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(citations),
      datasets: [{
        label: '引用次数',
        data: Object.values(citations),
        backgroundColor: 'rgba(54, 162, 235, 0.5)'
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        title: { display: true, text: 'Google Scholar 引用次数统计' }
      }
    }
  });
});
---

<canvas id="citationChart" width="400" height="200"></canvas>
